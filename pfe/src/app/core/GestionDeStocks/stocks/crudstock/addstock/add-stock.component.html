<!-- stock-piece-form.component.html -->
<div class="container">
    <form [formGroup]="stockPieceForm" (ngSubmit)="onSubmit()" class="update-form p-fluid p-grid">
      <h2 class="form-title">Ajouter un stock</h2>
  <p-toast></p-toast>
      <div class="form-field">
        <label for="piece_id">Choisir votre pièce</label>
        <p-dropdown 
          [options]="filteredPieces"
          [(ngModel)]="selectedPiece"
          optionLabel="nom_piece" 
          placeholder="Sélectionnez une pièce"
          id="piece_id" 
          formControlName="piece_id"
          [filter]="false"
          appendTo="body"
          [style]="{ width: '100%' }">
        </p-dropdown>
      </div>
      
      <div class="form-field">
        <label for="equipmentTypeID">Equipement</label>
        <p-autoComplete 
          [(ngModel)]="selectedEquipmentType" 
          [suggestions]="filteredEquipmentTypes" 
          (completeMethod)="filterEquipmentTypes($event)"
          (onSelect)="onEquipmentTypeSelect($event)"
          field="TypeName"
          [dropdown]="true"
          placeholder="Sélectionner un équipement"
          id="equipment_id" 
          formControlName="equipment_id">
        </p-autoComplete>
      </div>
  
      <div class="form-field">
        <label for="quantity">Quantité</label>
        <input type="number" id="quantity" formControlName="quantity" pInputNumber class="p-inputtext">
      </div>
  
      <div class="form-field">
        <label for="local">Emplacement</label>
        <p-dropdown 
          [options]="locations"
          [(ngModel)]="selectedLocation"
          optionLabel="name"
          placeholder="Sélectionnez un emplacement"
          id="local" 
          formControlName="local"
          [filter]="false"
          appendTo="body"
          [style]="{ width: '100%' }">
        </p-dropdown>
      </div>
      
      <div class="form-field p-col-12">
        <button type="submit" class="btn-primary">Ajouter un stock</button>
      </div>
      <div class="form-field p-col-12">

        <button type="button" (click)="onCancel()"  class="btn-secondary">Annuler</button>
      </div>
    </form>
  </div>
  
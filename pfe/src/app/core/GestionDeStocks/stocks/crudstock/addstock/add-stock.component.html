<!-- stock-piece-form.component.html -->
<div class="container">
    <form [formGroup]="stockPieceForm" (ngSubmit)="onSubmit()" class="p-fluid form-grid">
      <h2>Ajouter un stock</h2>
  
      <div class="p-field p-col-12 p-md-6">
        <label for="piece_id">Choisir votre pièce</label>
        <p-dropdown 
          [options]="filteredPieces"
          [(ngModel)]="selectedPiece"
          optionLabel="nom_piece" 
          placeholder="Sélectionnez une pièce"
          id="piece_id" 
          formControlName="piece_id"
          [filter]="false"
          appendTo="body"
          [style]="{ width: '100%' }">
        </p-dropdown>
      </div>
      
      <div class="p-field p-col-12 p-md-6">
        <label for="equipmentTypeID">Equipement</label>
        <p-autoComplete 
          [(ngModel)]="selectedEquipmentType" 
          [suggestions]="filteredEquipmentTypes" 
          (completeMethod)="filterEquipmentTypes($event)"
          (onSelect)="onEquipmentTypeSelect($event)"
          field="TypeName"
          [dropdown]="true"
          placeholder="Sélectionner un équipement"
          id="equipment_id" 
          formControlName="equipment_id">
        </p-autoComplete>
      </div>
  
      <div class="p-field p-col-12 p-md-6">
        <label for="quantity">Quantité</label>
        <input type="number" id="quantity" formControlName="quantity" pInputNumber class="p-inputtext">
      </div>
  
      <div class="p-field p-col-12 p-md-6">
        <label for="local">Emplacement</label>
        <p-dropdown 
          [options]="locations"
          [(ngModel)]="selectedLocation"
          optionLabel="name"
          placeholder="Sélectionnez un emplacement"
          id="local" 
          formControlName="local"
          [filter]="false"
          appendTo="body"
          [style]="{ width: '100%' }">
        </p-dropdown>
      </div>
  
      <div class="p-col-12 p-md-6 p-mt-2 p-button-group">
        <button type="submit" pButton label="Enregistrer" class="p-button p-button-primary"></button>
        <a routerLink="/stocks" pButton label="Annuler" class="p-button p-button-secondary"></a>
      </div>
    </form>
  </div>
  